import{l as _,r as v,j as H,d as u,f as m,F as w,v as E,x as M,G as g,g as t,u as f,p as h,af as S,_ as b,o as Y,b9 as k,b8 as I,c as P}from"./index-CKb1g0gP.js";import{h as y}from"./moment-C5S46NFB.js";const d=new WeakMap,D=(n,e)=>new IntersectionObserver(n,e);function O(n,e){let o=null;return function(...i){o&&clearTimeout(o),o=setTimeout(()=>{n(...i)},e)}}const T={mounted(n,e){const[o,i,r=!1]=e.value;if(!o||typeof o!="string"){console.warn("v-add-class-on-visible 需要一个字符串类型的类名作为第一个参数");return}const l=typeof i=="number"?i:0;let s=!1;const a={rootMargin:`0px 0px -${l}px 0px`,threshold:.5};let c=d.get(n);c||(c=D(O((x,L)=>{for(const p of x)p.isIntersecting?s||(n.classList.add(o),s=!0,r&&L.unobserve(n)):p.isIntersecting||s===!0&&(n.classList.remove(o),s=!1)},100),a),d.set(n,c),c.observe(n))},unmounted(n){const e=d.get(n);e&&(e.unobserve(n),d.delete(n))}},$=["data-text"],B={class:"content"},C={alt:"",class:"content-info"},A={class:"content-title"},z={class:"content-desc"},N=_({__name:"ScrollTimeLine",props:{itemsList:{type:[Object],default:[{year:"2018",description:"日子只需一天一天好好地过，别无他法。",image:"/public/avator/1.png"},{year:"2019",description:"每一天都应充满希望，迎接新的挑战。",image:"/public/avator/2.png"}]}},setup(n){const e=v(null),o=n;return(i,r)=>{const l=H("router-link");return u(),m("div",{ref_key:"scrollcontainer",ref:e,class:"scroll-timelines clearfix"},[(u(!0),m(w,null,E(o.itemsList,(s,a)=>M((u(),m("div",{key:a,class:"item","data-text":`《${s.note_category}》`},[t("div",B,[t("div",C,[t("p",null,f(s.summary)+"...",1),h(l,{to:`/article?fileId=${s.file_id}&name=${s.note_name}`},{default:S(()=>r[0]||(r[0]=[t("p",{class:"read-more"},"🔽阅读更多🚀🚀🚀",-1)])),_:2},1032,["to"])]),t("h2",A,f(g(y)(s.create_time).format("YYYY/MM/DD")),1),t("p",z,f(s.note_name),1)])],8,$)),[[g(T),["item-active",200,!1]]])),128))],512)}}}),V=b(N,[["__scopeId","data-v-49b5d8fb"]]),j={class:"timeLines-container"},F=_({__name:"TimeLine",setup(n){const e=v({datetimeStart:"2000-12-08 00:00:00",datetimeEnd:y().format("YYYY-MM-DD HH:mm:ss"),currentPage:1,pageSize:10,totalPages:0}),o=v([]);async function i(){try{const{data:s,code:a}=await k({datetimeStart:e.value.datetimeStart,datetimeEnd:e.value.datetimeEnd,page:e.value.currentPage,pageSize:e.value.pageSize});a==200&&(o.value=[...o.value,...s.notes],e.value.totalPages=s.total_pages)}catch{}}const r=I(()=>{e.value.currentPage<e.value.totalPages&&(e.value.currentPage++,i())},500);function l(){const s=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);window.innerHeight+window.scrollY+40>=s&&r()}return Y(()=>{i(),document.addEventListener("scroll",l)}),P(()=>{document.removeEventListener("scroll",l)}),(s,a)=>(u(),m("div",j,[a[0]||(a[0]=t("div",{class:"header-timeline"},[t("h2",{class:"title"}," 时间 "),t("div",null,[t("h3",{class:"subtile"}," 现在 ")]),t("div",null,[t("h3",{class:"subtile"}," 通往过去的路 ")])],-1)),t("div",null,[h(V,{"items-list":o.value},null,8,["items-list"])]),a[1]||(a[1]=t("div",{class:"header-timeline"},[t("h2",{class:"title"}," 时间 "),t("div",null,[t("h3",{class:"subtile"}," 过去 ")]),t("div",null,[t("h3",{class:"subtile"}," 通往未来的路 ")])],-1))]))}}),q=b(F,[["__scopeId","data-v-c10629ff"]]);export{q as default};
