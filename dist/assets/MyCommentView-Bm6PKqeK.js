import{S as U,cf as K,cg as G,Z as H,l as T,ax as Q,a0 as O,r as j,s as A,d as i,k as N,af as u,x,y as ee,g as s,G as e,ai as z,i as l,ak as se,h as _,f as m,a2 as $,H as w,u as a,p as d,ch as te,F as q,au as ae,aG as L,T as ne,n as oe,bm as le,M as re,b1 as P,ci as ce,o as ie,v as de,aW as ue,aF as pe,aV as V,aX as me,_ as ye}from"./index-CKb1g0gP.js";import{d as fe}from"./comment-C04qkBVq.js";import{v as ve}from"./validate-CdMOi96S.js";import"./index.esm-DueM3VUK.js";const ge=["light","dark"],he=U({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:K(G),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:ge,default:"light"}}),_e={close:k=>k instanceof MouseEvent},we=T({name:"ElAlert"}),Ce=T({...we,props:he,emits:_e,setup(k,{emit:y}){const o=k,{Close:f}=te,C=Q(),r=O("alert"),b=j(!0),I=A(()=>G[o.type]),E=A(()=>[r.e("icon"),{[r.is("big")]:!!o.description||!!C.default}]),M=A(()=>({"with-description":o.description||C.default})),S=n=>{b.value=!1,y("close",n)};return(n,F)=>(i(),N(ae,{name:e(r).b("fade"),persisted:""},{default:u(()=>[x(s("div",{class:l([e(r).b(),e(r).m(n.type),e(r).is("center",n.center),e(r).is(n.effect)]),role:"alert"},[n.showIcon&&e(I)?(i(),N(e(z),{key:0,class:l(e(E))},{default:u(()=>[(i(),N(se(e(I))))]),_:1},8,["class"])):_("v-if",!0),s("div",{class:l(e(r).e("content"))},[n.title||n.$slots.title?(i(),m("span",{key:0,class:l([e(r).e("title"),e(M)])},[$(n.$slots,"title",{},()=>[w(a(n.title),1)])],2)):_("v-if",!0),n.$slots.default||n.description?(i(),m("p",{key:1,class:l(e(r).e("description"))},[$(n.$slots,"default",{},()=>[w(a(n.description),1)])],2)):_("v-if",!0),n.closable?(i(),m(q,{key:2},[n.closeText?(i(),m("div",{key:0,class:l([e(r).e("close-btn"),e(r).is("customed")]),onClick:S},a(n.closeText),3)):(i(),N(e(z),{key:1,class:l(e(r).e("close-btn")),onClick:S},{default:u(()=>[d(e(f))]),_:1},8,["class"]))],64)):_("v-if",!0)],2)],2),[[ee,b.value]])]),_:3},8,["name"]))}});var ke=H(Ce,[["__file","alert.vue"]]);const be=L(ke),Ie=U({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:ne([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),Se=T({name:"ElCard"}),$e=T({...Se,props:Ie,setup(k){const y=O("card");return(o,f)=>(i(),m("div",{class:l([e(y).b(),e(y).is(`${o.shadow}-shadow`)])},[o.$slots.header||o.header?(i(),m("div",{key:0,class:l(e(y).e("header"))},[$(o.$slots,"header",{},()=>[w(a(o.header),1)])],2)):_("v-if",!0),s("div",{class:l([e(y).e("body"),o.bodyClass]),style:oe(o.bodyStyle)},[$(o.$slots,"default")],6),o.$slots.footer||o.footer?(i(),m("div",{key:1,class:l(e(y).e("footer"))},[$(o.$slots,"footer",{},()=>[w(a(o.footer),1)])],2)):_("v-if",!0)],2))}});var Te=H($e,[["__file","card.vue"]]);const Ee=L(Te),Me={class:"MyCommentView-container"},Be={class:"card-content"},De={class:"card-content"},Ne={class:"card-content"},Ve={class:"card-content"},Ae={class:"card-content"},Fe={class:"card-content"},Re={class:"card-content"},ze={key:0,class:"empty-comments"},Pe={key:1,class:"empty-comments"},Ue={class:"comment-header"},Ge={class:"comment-time"},He={class:"comment-article"},Oe={class:"comment-content"},je={class:"replytome"},qe={class:"username"},Le={class:"accept-comment"},We={class:"comment-footer"},Xe={class:"like-count"},Ye=T({__name:"MyCommentView",setup(k){const y=le(),o=re(),{userInfo:f}=P(o),C=ce(),{comments:r,myComments:b,repliesToMe:I,commentsRepliedByMe:E,commentsNoRepliedByMe:M,commentsAboutArticle:S,commentsByMyself:n,status:F}=P(C),v=j(0),R=A(()=>{switch(v.value){case 0:return r.value;case 1:return b.value;case 2:return I.value;case 3:return E.value;case 4:return M.value;case 5:return S.value;case 6:return n.value;default:return[]}}),W=g=>{y.push({name:"article",params:{id:g}})},X=async g=>{const t={commentId:g,userId:f.value.userId},{valid:p,errors:h}=await ve(fe,t);if(!p)return V({message:h[0],type:"warning"});try{const{code:B,ErrorMessage:D}=await me(t);B==200?(V({message:"删除评论成功",type:"success"}),C.getComments(f.value.userId)):V({message:D||"删除失败",type:"warning"})}catch{V({message:"删除评论出错",type:"error"})}},Y=g=>{const t=new Date(g);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} ${t.getHours()}:${t.getMinutes()}`};function Z(g){const p=g.target.closest(".statistics-card"),{type:h}=p.dataset;h&&(v.value=+h)}return ie(()=>{F.value==="pending"&&C.getComments(o.userInfo.userId)}),(g,t)=>{const p=Ee,h=be,B=ue,D=pe;return i(),m("div",Me,[s("div",{class:"statistics",onClick:Z},[d(p,{class:l(["statistics-card",{active:v.value==0}]),"data-type":"0",shadow:"always"},{default:u(()=>[s("div",Be,[t[0]||(t[0]=s("h3",null,"总评论",-1)),s("strong",null,a(e(r).length),1)])]),_:1},8,["class"]),d(p,{class:l(["statistics-card",{active:v.value==1}]),"data-type":"1",shadow:"always"},{default:u(()=>[s("div",De,[t[1]||(t[1]=s("h3",null,"我的评论",-1)),s("strong",null,a(e(b).length),1)])]),_:1},8,["class"]),d(p,{class:l(["statistics-card",{active:v.value==2}]),"data-type":"2",shadow:"always"},{default:u(()=>[s("div",Ne,[t[2]||(t[2]=s("h3",null,"他人评论",-1)),s("strong",null,a(e(I).length),1)])]),_:1},8,["class"]),d(p,{class:l(["statistics-card",{active:v.value==3}]),"data-type":"3",shadow:"always"},{default:u(()=>[s("div",Ve,[t[3]||(t[3]=s("h3",null,"已回复",-1)),s("strong",null,a(e(E).length),1)])]),_:1},8,["class"]),d(p,{class:l(["statistics-card",{active:v.value==4}]),"data-type":"4",shadow:"always"},{default:u(()=>[s("div",Ae,[t[4]||(t[4]=s("h3",null,"尚未回复",-1)),s("strong",null,a(e(M).length),1)])]),_:1},8,["class"]),d(p,{class:l(["statistics-card",{active:v.value==5}]),"data-type":"5",shadow:"always"},{default:u(()=>[s("div",Fe,[t[5]||(t[5]=s("h3",null,"评论文章",-1)),s("strong",null,a(e(S).length),1)])]),_:1},8,["class"]),d(p,{class:l(["statistics-card",{active:v.value==6}]),"data-type":"6",shadow:"always"},{default:u(()=>[s("div",Re,[t[6]||(t[6]=s("h3",null,"评论自己",-1)),s("strong",null,a(e(n).length),1)])]),_:1},8,["class"])]),e(r).length===0?(i(),m("div",ze,[d(h,{title:"评论空空如也，赶快去评论吧！",type:"warning"})])):_("",!0),e(R).length===0?(i(),m("div",Pe,[d(h,{title:"评论空空如也，没有任何评论！",style:{padding:"10px","text-align":"center"},type:"warning"})])):(i(!0),m(q,{key:2},de(e(R),c=>(i(),m("div",{key:c.commentId},[d(p,{class:l(["comment-card",{"my-comment":c.userId===e(f).userId,"reply-to-me":c.parentId}]),shadow:"always"},{default:u(()=>[s("div",Ue,[s("span",Ge,a(Y(c.createdDateTime)),1),s("span",He,"涉及文章："+a(c.articleTitle),1)]),s("div",Oe,[s("p",je,[s("span",qe,a(c.parentUserId===e(f).userId?"我（":"对方（")+a(c.parentUserName?c.parentUserName:"文章")+"）：",1),s("span",null,a(c.parentComent),1)]),s("p",Le,a(c.userId===e(f).userId?"我（":"对方（")+" "+a(c.userName)+" ）: "+a(c.content),1)]),s("div",We,[s("span",Xe,[w(a(c.likeCount)+" ",1),d(B,{name:"icon-xihuan1"})]),d(D,{type:"success",size:"small",onClick:J=>W(c.articleFileId)},{default:u(()=>t[7]||(t[7]=[w("查看文章")])),_:2},1032,["onClick"]),d(D,{disabled:e(f).userId!==c.userId,type:"danger",size:"small",onClick:J=>X(c.commentId)},{default:u(()=>t[8]||(t[8]=[w("删除")])),_:2},1032,["disabled","onClick"])])]),_:2},1032,["class"])]))),128))])}}}),xe=ye(Ye,[["__scopeId","data-v-bdd164b2"]]);export{xe as default};
