import{l as b,bn as I,bo as E,bp as B,bq as S,r as d,w as T,D as g,o as _,br as k,c as M,d as y,f as C,_ as D,bs as L,bt as U,bu as H,bv as O,bl as P,b1 as Z,s as V,bw as $,g as z,p as x,ag as F,G as h}from"./index-CKb1g0gP.js";const R=b({__name:"BarChart",props:{xAxisData:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]}},setup(v){I([E,B,S]);const a=v,r=d(null);let e=null;const n=d({title:{text:"标签图表",textStyle:{color:"#ccc",fontSize:26},left:"40%",top:"0",position:"absolute"},xAxis:{type:"category",data:a.xAxisData,axisLabel:{interval:0,rotate:45,fontSize:12}},yAxis:{type:"value",axisTick:{show:!0,interval:"auto"},splitNumber:1,min:1},series:[{data:a.data,type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},label:{show:!0,position:"top",formatter:"{c}"}}],dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100,handleSize:"8%",height:20,bottom:10}]});function i(){e&&e.setOption(n.value)}d(a.data);const l=d(a.xAxisData);return T([()=>a.data,()=>a.xAxisData],s=>{n.value.xAxis.data=s[1],n.value.series[0].data=s[0],g(()=>{i()})},{deep:!0}),_(()=>{r.value&&(e=k(r.value),g(()=>{i()}),e.on("click",s=>{if(s.componentType==="series"){const p=s.dataIndex,f=l.value.length,u=Math.ceil(f*(n.value.dataZoom[0].end/100));let c=n.value.dataZoom[0].start,t=n.value.dataZoom[0].end;p<f/2?(c=Math.max(c-10,0),t=Math.max(t-10,u)):(c=Math.min(c+10,100-u),t=Math.min(t+10,100)),e.setOption({dataZoom:[{start:c,end:t}]})}}))}),M(()=>{e&&e.dispose()}),(s,p)=>(y(),C("div",{class:"BarChart-container",ref_key:"barChartContainer",ref:r},null,512))}}),N=D(R,[["__scopeId","data-v-e3d659b6"]]),W=b({__name:"PieChart",props:{legendData:{type:Array,default:[]},readingData:{type:Array,default:[]},countData:{type:Array,default:[]}},setup(v){I([L,U,H,S,O]);const a=v,r=d(null);let e=null;const n=d({title:{text:"分类图表",textStyle:{color:"#ccc",fontSize:26},left:"0",top:"40%",position:"absolute"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{data:a.legendData},series:[{name:"阅读量",type:"pie",selectedMode:"single",radius:[0,"30%"],label:{position:"inner",fontSize:14,formatter:"{b}: {c}"},labelLine:{show:!1},data:a.readingData},{name:"文章数量",type:"pie",radius:["50%","75%"],labelLine:{length:20},label:{formatter:`{a|{a}}{abg|}
{hr|}
  {b|{b}：}{c}  {per|{d}%}  `,backgroundColor:"#F6F8FC",borderColor:"#8C8D8E",borderWidth:1,borderRadius:4,rich:{a:{color:"#6E7079",lineHeight:22,align:"center"},hr:{borderColor:"#8C8D8E",width:"100%",borderWidth:1,height:0},b:{color:"#4C5058",fontSize:14,fontWeight:"bold",lineHeight:33},per:{color:"#fff",backgroundColor:"#4C5058",padding:[3,4],borderRadius:4}}},data:a.countData}]});function i(){e&&n.value&&e.setOption(n.value)}return T([()=>a.countData,()=>a.readingData,()=>a.legendData],l=>{n.value.series[0].data=l[1],n.value.series[1].data=l[0],n.value.legend.data=l[2],g(()=>{i()})}),_(()=>{r.value&&(e=k(r.value),n.value&&e.setOption(n.value))}),M(()=>{e&&e.dispose()}),(l,s)=>(y(),C("div",{class:"PieChart-container",ref_key:"pieChartContainer",ref:r},null,512))}}),G=D(W,[["__scopeId","data-v-a687af0b"]]),q=b({__name:"TopItemChart",props:{articleTitles:{type:Array,default:()=>[]},articleViews:{type:Array,default:()=>[]}},setup(v){I([E,B,S]);const a=v,r=d(null);let e=null,n=null;const i=d(a.articleViews.map(()=>1)),l=d({title:{text:"文章阅读量前十",textStyle:{color:"#333",fontSize:20,rich:{ellipsis:{width:200,overflow:"truncate",align:"center",fontSize:20,color:"#333"}}},left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:t=>{const o=t[0];return`${o.name}<br/>阅读量: ${o.value}`}},xAxis:{type:"value",name:"阅读量",axisLabel:{formatter:"{value}"}},yAxis:{type:"category",name:"文章标题",nameGap:20,data:a.articleTitles,inverse:!0,axisLabel:{interval:0,fontSize:12,formatter:t=>t},animationDuration:300,animationDurationUpdate:300,max:10},series:[{name:"阅读量",type:"bar",data:i.value,label:{show:!0,position:"right",formatter:"{c}",valueAnimation:!0},itemStyle:{color:"#5470C6"}}],animationDuration:0,animationDurationUpdate:3e3,animationEasing:"linear",animationEasingUpdate:"linear"});function s(){e&&e.setOption(l.value)}function p(){const t=a.articleTitles.map((m,A)=>({title:m,views:i.value[A]})).sort((m,A)=>A.views-m.views),o=t.map(m=>m.title),w=t.map(m=>m.views);l.value.yAxis.data=o,l.value.series[0].data=w,g(()=>{s()})}T([()=>a.articleTitles,()=>a.articleViews],t=>{l.value.yAxis.data=t[0],i.value=t[1].map(o=>1),p()},{deep:!0});function f(){let t=!0;for(let o=0;o<a.articleViews.length;o++)if(i.value[o]<a.articleViews[o]){t=!1;const w=Math.floor(Math.random()*100);i.value[o]+=w,i.value[o]>a.articleViews[o]&&(i.value[o]=a.articleViews[o])}p(),t&&c()}function u(){n||(n=setInterval(f,3e3))}function c(){n&&(clearInterval(n),n=null)}return _(()=>{r.value&&(e=k(r.value),g(()=>{s(),u()}))}),M(()=>{e&&(e.dispose(),e=null),c()}),(t,o)=>(y(),C("div",{class:"TopItemChart-container",ref_key:"topItemChartContainer",ref:r},null,512))}}),j=D(q,[["__scopeId","data-v-dbc78fe8"]]),J={class:"HomeView-container"},K={class:"center-container"},Q={class:"bottom-container"},X=b({__name:"HomeView",setup(v){const a=d(`本博客设置了三种身份，分别为普通用户，VIP用户和管理员用户。不同的用户拥有不同的权限，点击切换按钮可以进行切换.
  切换后会跳转到首页，再次进入则身份切换完成。当前普通访客，可见普通用户身份，该用户只能看到首页和文章管理页面，但是对于文章管理页面没有操作权限。
  `),r=P(),{categoryCounts:e,tagCounts:n,notesCounts:i}=Z(r),l=V(()=>$(n.value,["tag_name","note_count"])),s=V(()=>{const f=[],u=[],c=[];return e.value.forEach((t,o)=>{u.push(t.category_name),f.push({name:t.category_name,value:t.reading}),c.push({name:t.category_name,value:t.note_count})}),{readingData:f,legendData:u,countData:c}}),p=V(()=>$(i.value,["name","reading"]));return _(()=>{r.tagCounts.length===0&&r.getAricleTagAndCategoryInfo()}),(f,u)=>{const c=F;return y(),C("div",J,[z("div",K,[x(c,{type:"textarea",rows:20,placeholder:"请输入内容",modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=t=>a.value=t)},null,8,["modelValue"]),x(G,{class:"chart",legendData:h(s).legendData,countData:h(s).countData,readingData:h(s).readingData},null,8,["legendData","countData","readingData"]),x(N,{class:"chart",xAxisData:h(l).tag_name,data:h(l).note_count},null,8,["xAxisData","data"])]),z("div",Q,[x(j,{class:"chart",articleTitles:h(p).name,articleViews:h(p).reading},null,8,["articleTitles","articleViews"])])])}}}),tt=D(X,[["__scopeId","data-v-11d1861c"]]);export{tt as default};
